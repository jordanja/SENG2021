<!DOCTYPE html>
<html lang="en">

<head>
    {{> header }}
    <link rel="stylesheet" href="/css/unslider.css" />
    <link rel="stylesheet" href="/css/unslider-dots.css" />
</head>

<body>
    {{> navbar }}
    <!-- ugly af facebook button-->


    <div id="fb-root"></div>
    <script>
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>

    <div class="jumbotron" id="info-main">
        <div id="info-bg" style="background-image: url('{{ header_image }}');"></div>
    </div>


    <div class="container" id="campsite-body">
        <div>
            <span><h1 id="info-header">{{ place.name }}</h1></span>
            <span class="rating stars-container stars-{{ place.rating }}">★★★★★</span>
        </div>
        <br />
        <div class="slider">
            <ul>{{#place_images}}<li><img src="{{.}}" class="slide-img"></li>{{/place_images}}</ul>
        </div>
<!-- weather table for 5 days(average weather and temperature) -->
        <table class="table-condensed">
            <thead>
                <tr>
                    <th></th>
                    {{#place_5day_weather}}
                    <th>{{ time }}</th>
                    {{/place_5day_weather}}
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">Weather:</th>
                    {{#place_5day_weather}}
                    <td><img id="weatherIcon" src="http://openweathermap.org/img/w/{{ icon }}.png"></td>
                    {{/place_5day_weather}}
                </tr>
            </tbody>
            <tbody>
                <tr>
                    <th scope="row">Temperature:</th>
                    {{#place_5day_weather}}
                    <td>{{ temp }}°C</td>
                    {{/place_5day_weather}}
                </tr>
            </tbody>
        </table>
        <h3>{{ place.address }}</h3>
        
        <h3>{{ place.phone }}</h3>
        <h3><a href="{{ place.website }}">{{ place.website }}</a></h3>

        <!-- give a 5 day weather forecast of the location // use for debugging purposes-->
        <!--
        <p>
            <h2>Today's weather:</h2>
            <br>Weather condition: {{ place_condition }}<img id="weatherIcon" src="http://openweathermap.org/img/w/{{place_icon}}.png"></br>
            <br>Current temperature: {{ place_temp }}°C</br>
            <br>Current wind speed: {{ place_wind_speed }} m/s</br>
            <br>Current time: {{ place_time }}</br>
        </p>-->

        <p> id is : {{place_id}} </p>


        <!-- new map goes here-->
        <div class="col-lg-9">   
            <div id="map"></div>
            <script>
            //will clean up this mess later
            //some vars

            //some interesting places needed, petrol stations, phamarcy, hospital and super markets

              var map;
              var mapLatLng = { lat: {{place_lat}}, lng: {{place_lng}} };

              //var request = {
              //}
          


              function initMap() {
                map = new google.maps.Map(document.getElementById('map'), {
                  center: mapLatLng,
                  zoom: 13
                });

                var marker = new google.maps.Marker({
                    position: mapLatLng,
                    map: map,
                });

              }
            </script>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDydgd2jbeRErhSowqagqkqVqARAPUieAw&callback=initMap"
            async defer></script>
        </div>

        <!--share buttons for facebook and twitter-->
        <div id="pageURL" class="fb-share-button" data-href="#" data-layout="button" data-size="large" data-mobile-iframe="true">
        <a id="fbshareURL" class="fb-xfbml-parse-ignore" target="_blank" href="#">Share</a></div>
        <!-- probably need to fix the size of the buttons-->
        <div><a href="https://twitter.com/share" class="twitter-share-button" data-size="large" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></div>
        <button onclick="myFunction()">Print this page</button>

        <script>
        function myFunction() {
            window.print();
        }
        </script>
        
    <script>
        //give the page urls:
        document.getElementById('pageURL').href = document.URL;
        document.getElementById('fbshareURL').href = 'https://www.facebook.com/sharer/sharer.php?u='
        + document.URL + '%2F&amp;src=sdkpreparse';
    </script>
    {{> bottomJs }}
    <script src="/js/unslider.js"></script>
    <script>$(function() {
    $('.slider').unslider({
        infinite: true
    });
    })</script>
</body>

</html>
